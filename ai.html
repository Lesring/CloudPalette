<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>äº‘å½©é…è‰² - AIé…è‰²åŠ©æ‰‹</title>
  <link rel="icon" type="image/svg+xml" href="CloudPalette.svg">
  <link rel="alternate icon" type="image/x-icon" href="CloudPalette.ico">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: white;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* é¡¶éƒ¨å·¥å…·æ  */
    .toolbar {
      background: white;
      border-bottom: 1px solid #e0e0e0;
      padding: 16px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 200;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .toolbar-left {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .logo {
      font-size: 20px;
      font-weight: 600;
      color: #333;
    }
    .logo img {
      width: 22px;
      height: 22px;
      margin-right: 8px;
      vertical-align: middle;
    }

    .toolbar-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .action-btn {
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      background: white;
      color: #666;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .action-btn:hover {
      background: #f8f9fa;
      border-color: #007bff;
      color: #007bff;
    }

    /* æš—è‰²æ¨¡å¼ */
    body.dark {
      background: #2d2d2d;
      color: #e6e6e6;
    }

    body.dark .toolbar {
      background: #3a3a3a;
      border-bottom: 1px solid #4a4a4a;
      box-shadow: none;
    }

    body.dark .logo { color: #e6e6e6; }

    body.dark .action-btn {
      background: #3a3a3a;
      color: #c8c8c8;
      border-color: #4a4a4a;
    }
    body.dark .action-btn:hover {
      background: #4a4a4a;
      border-color: #4c8dff;
      color: #4c8dff;
    }

    /* ä¸»å†…å®¹åŒºåŸŸ */
    .main-content {
      flex: 1;
      padding: 40px 24px;
      max-width: 1200px;
      margin: 0 auto;
      width: 100%;
    }

    .ai-header {
      text-align: center;
      margin-bottom: 40px;
    }

    .ai-header h1 {
      font-size: 32px;
      font-weight: 700;
      color: #333;
      margin-bottom: 12px;
    }

    .ai-header p {
      font-size: 16px;
      color: #666;
      max-width: 600px;
      margin: 0 auto;
    }

    body.dark .ai-header h1 { color: #e6e6e6; }
    body.dark .ai-header p { color: #c8c8c8; }

    /* AIåŠŸèƒ½å¡ç‰‡ */
    .ai-features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 24px;
      margin-bottom: 40px;
    }

    .ai-feature-card {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      padding: 24px;
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .ai-feature-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
      border-color: #007bff;
    }

    .ai-feature-card.active {
      border-color: #007bff;
      background: #f8f9ff;
    }

    .ai-feature-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 16px;
    }

    .ai-feature-icon {
      width: 48px;
      height: 48px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .ai-feature-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    .ai-feature-desc {
      font-size: 14px;
      color: #666;
      line-height: 1.5;
    }

    body.dark .ai-feature-card {
      background: #3a3a3a;
      border-color: #4a4a4a;
    }

    body.dark .ai-feature-card:hover {
      border-color: #4c8dff;
      box-shadow: 0 8px 25px rgba(76, 141, 255, 0.1);
    }

    body.dark .ai-feature-card.active {
      border-color: #4c8dff;
      background: #2a2a2a;
    }

    body.dark .ai-feature-title { color: #e6e6e6; }
    body.dark .ai-feature-desc { color: #c8c8c8; }

    /* AIå·¥ä½œåŒºåŸŸ */
    .ai-workspace {
      background: white;
      border: 1px solid #e0e0e0;
      border-radius: 12px;
      padding: 32px;
      min-height: 400px;
    }

    .ai-workspace-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid #e0e0e0;
    }

    .ai-workspace-icon {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .ai-workspace-title {
      font-size: 20px;
      font-weight: 600;
      color: #333;
    }

    /* è¾“å…¥åŒºåŸŸ */
    .ai-input-section {
      margin-bottom: 24px;
    }

    .ai-input-label {
      font-size: 14px;
      font-weight: 500;
      color: #333;
      margin-bottom: 8px;
      display: block;
    }

    .ai-input {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 14px;
      transition: border-color 0.2s ease;
      resize: vertical;
      min-height: 80px;
    }

    .ai-input:focus {
      outline: none;
      border-color: #007bff;
    }

    .ai-input.color-input {
      min-height: 60px;
      font-family: monospace;
    }

    /* æŒ‰é’® */
    .ai-btn {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .ai-btn.primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .ai-btn.primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
    }

    .ai-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }

    /* ç»“æœåŒºåŸŸ */
    .ai-result-section {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid #e0e0e0;
    }

    .ai-result-title {
      font-size: 16px;
      font-weight: 600;
      color: #333;
      margin-bottom: 16px;
    }

    .ai-result-content {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 8px;
      padding: 16px;
      min-height: 100px;
      font-size: 14px;
      line-height: 1.6;
      color: #333;
    }

    .ai-result-content.loading {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #666;
    }

    .loading-spinner {
      width: 20px;
      height: 20px;
      border: 2px solid #e9ecef;
      border-top: 2px solid #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 12px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* é…è‰²å±•ç¤º */
    .palette-preview {
      display: flex;
      gap: 8px;
      margin-top: 16px;
    }

    .palette-color {
      flex: 1;
      height: 60px;
      border-radius: 8px;
      border: 1px solid #ddd;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: 600;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .palette-color:hover {
      transform: scale(1.05);
    }

    /* æš—è‰²æ¨¡å¼é€‚é… */
    body.dark .ai-workspace {
      background: #3a3a3a;
      border-color: #4a4a4a;
    }

    body.dark .ai-workspace-header {
      border-bottom-color: #4a4a4a;
    }

    body.dark .ai-workspace-title { color: #e6e6e6; }

    body.dark .ai-input-label { color: #e6e6e6; }

    body.dark .ai-input {
      background: #2a2a2a;
      color: #e6e6e6;
      border-color: #4a4a4a;
    }

    body.dark .ai-input:focus {
      border-color: #4c8dff;
    }

    body.dark .ai-result-content {
      background: #2a2a2a;
      border-color: #4a4a4a;
      color: #e6e6e6;
    }

    body.dark .ai-result-title { color: #e6e6e6; }

    /* å“åº”å¼è®¾è®¡ */
    @media (max-width: 768px) {
      .main-content {
        padding: 20px 16px;
      }

      .ai-header h1 {
        font-size: 24px;
      }

      .ai-features {
        grid-template-columns: 1fr;
        gap: 16px;
      }

      .ai-workspace {
        padding: 20px;
      }
    }

    /* éšè—/æ˜¾ç¤ºåŠŸèƒ½ */
    .ai-feature-content {
      display: none;
    }

    .ai-feature-content.active {
      display: block;
    }
  </style>
</head>
<body>
  <!-- é¡¶éƒ¨å·¥å…·æ  -->
  <div class="toolbar">
    <div class="toolbar-left">
      <div class="logo"><img src="CloudPalette.svg" alt="CloudPalette Logo"> äº‘å½©AIé…è‰²åŠ©æ‰‹</div>
    </div>
    <div class="toolbar-right">
      <a href="index.html" class="action-btn">ğŸ  è¿”å›ä¸»é¡µ</a>
      <button class="action-btn" id="toggleThemeBtn" title="åˆ‡æ¢æš—è‰²æ¨¡å¼">ğŸŒ“</button>
    </div>
  </div>

  <!-- ä¸»å†…å®¹åŒºåŸŸ -->
  <div class="main-content">
    <div class="ai-header">
      <h1>äº‘å½©AIé…è‰²åŠ©æ‰‹</h1>
      <p>åˆ©ç”¨äººå·¥æ™ºèƒ½æŠ€æœ¯ï¼Œä¸ºæ‚¨æä¾›ä¸“ä¸šçš„é¢œè‰²åˆ†æå’Œé…è‰²å»ºè®®</p>
    </div>

    <!-- AIåŠŸèƒ½å¡ç‰‡ -->
    <div class="ai-features">
      <div class="ai-feature-card" data-feature="color-analysis">
        <div class="ai-feature-header">
          <div class="ai-feature-icon">ğŸ¨</div>
          <div>
            <div class="ai-feature-title">AIé¢œè‰²åˆ†æ</div>
            <div class="ai-feature-desc">åˆ†æå•ä¸ªé¢œè‰²çš„å±æ€§ã€æƒ…æ„Ÿå’Œç”¨é€”</div>
          </div>
        </div>
      </div>

      <div class="ai-feature-card" data-feature="palette-analysis">
        <div class="ai-feature-header">
          <div class="ai-feature-icon">ğŸ”</div>
          <div>
            <div class="ai-feature-title">AIé…è‰²åˆ†æ</div>
            <div class="ai-feature-desc">åˆ†æé…è‰²æ–¹æ¡ˆçš„å’Œè°åº¦å’Œé€‚ç”¨åœºæ™¯</div>
          </div>
        </div>
      </div>

      <div class="ai-feature-card" data-feature="text-to-color">
        <div class="ai-feature-header">
          <div class="ai-feature-icon">âœ¨</div>
          <div>
            <div class="ai-feature-title">æ–‡å­—ç”Ÿæˆé…è‰²</div>
            <div class="ai-feature-desc">æ ¹æ®æè¿°æ–‡å­—æ™ºèƒ½ç”Ÿæˆé…è‰²æ–¹æ¡ˆ</div>
          </div>
        </div>
      </div>

      <div class="ai-feature-card" data-feature="color-suggestion">
        <div class="ai-feature-header">
          <div class="ai-feature-icon">ğŸ’¡</div>
          <div>
            <div class="ai-feature-title">æ™ºèƒ½é…è‰²å»ºè®®</div>
            <div class="ai-feature-desc">åŸºäºç°æœ‰é¢œè‰²æ¨èæœ€ä½³æ­é…æ–¹æ¡ˆ</div>
          </div>
        </div>
      </div>
    </div>

    <!-- AIå·¥ä½œåŒºåŸŸ -->
    <div class="ai-workspace">
      <div class="ai-feature-content active" id="color-analysis-content">
        <div class="ai-workspace-header">
          <div class="ai-workspace-icon">ğŸ¨</div>
          <div class="ai-workspace-title">AIé¢œè‰²åˆ†æ</div>
        </div>
        
        <div class="ai-input-section">
          <label class="ai-input-label">é€‰æ‹©è¦åˆ†æçš„é¢œè‰²ï¼š</label>
          <input type="text" class="ai-input color-input" id="analysisColorInput" placeholder="è¾“å…¥é¢œè‰²ä»£ç ï¼Œå¦‚ï¼š#ff6b6b" value="#ff6b6b">
        </div>

        <button class="ai-btn primary" id="analyzeColorBtn">
          <span>ğŸ”</span>
          åˆ†æé¢œè‰²
        </button>

        <div class="ai-result-section">
          <div class="ai-result-title">åˆ†æç»“æœ</div>
          <div class="ai-result-content" id="colorAnalysisResult">
            ç‚¹å‡»"åˆ†æé¢œè‰²"æŒ‰é’®å¼€å§‹åˆ†æ...
          </div>
        </div>
      </div>

      <div class="ai-feature-content" id="palette-analysis-content">
        <div class="ai-workspace-header">
          <div class="ai-workspace-icon">ğŸ”</div>
          <div class="ai-workspace-title">AIé…è‰²åˆ†æ</div>
        </div>
        
        <div class="ai-input-section">
          <label class="ai-input-label">è¾“å…¥é…è‰²æ–¹æ¡ˆï¼ˆæ¯è¡Œä¸€ä¸ªé¢œè‰²ä»£ç ï¼‰ï¼š</label>
          <textarea class="ai-input" id="paletteAnalysisInput" placeholder="#ff6b6b&#10;#4ecdc4&#10;#45b7d1&#10;#96ceb4&#10;#ffeaa7">#ff6b6b
#4ecdc4
#45b7d1
#96ceb4
#ffeaa7</textarea>
        </div>

        <button class="ai-btn primary" id="analyzePaletteBtn">
          <span>ğŸ”</span>
          åˆ†æé…è‰²
        </button>

        <div class="ai-result-section">
          <div class="ai-result-title">åˆ†æç»“æœ</div>
          <div class="ai-result-content" id="paletteAnalysisResult">
            ç‚¹å‡»"åˆ†æé…è‰²"æŒ‰é’®å¼€å§‹åˆ†æ...
          </div>
        </div>
      </div>

      <div class="ai-feature-content" id="text-to-color-content">
        <div class="ai-workspace-header">
          <div class="ai-workspace-icon">âœ¨</div>
          <div class="ai-workspace-title">æ–‡å­—ç”Ÿæˆé…è‰²</div>
        </div>
        
        <div class="ai-input-section">
          <label class="ai-input-label">æè¿°æ‚¨æƒ³è¦çš„é…è‰²é£æ ¼ï¼š</label>
          <textarea class="ai-input" id="textToColorInput" placeholder="ä¾‹å¦‚ï¼šç°ä»£ç®€çº¦çš„ç§‘æŠ€æ„Ÿé…è‰²ï¼Œä¸»è‰²è°ƒä¸ºè“è‰²ï¼Œæ­é…ç™½è‰²å’Œç°è‰²ï¼Œä½“ç°ä¸“ä¸šå’Œä¿¡ä»»æ„Ÿ">ç°ä»£ç®€çº¦çš„ç§‘æŠ€æ„Ÿé…è‰²ï¼Œä¸»è‰²è°ƒä¸ºè“è‰²ï¼Œæ­é…ç™½è‰²å’Œç°è‰²ï¼Œä½“ç°ä¸“ä¸šå’Œä¿¡ä»»æ„Ÿ</textarea>
        </div>

        <button class="ai-btn primary" id="generateFromTextBtn">
          <span>âœ¨</span>
          ç”Ÿæˆé…è‰²
        </button>

        <div class="ai-result-section">
          <div class="ai-result-title">ç”Ÿæˆçš„é…è‰²æ–¹æ¡ˆ</div>
          <div class="ai-result-content" id="textToColorResult">
            ç‚¹å‡»"ç”Ÿæˆé…è‰²"æŒ‰é’®å¼€å§‹ç”Ÿæˆ...
          </div>
          <div class="palette-preview" id="textToColorPreview"></div>
        </div>
      </div>

      <div class="ai-feature-content" id="color-suggestion-content">
        <div class="ai-workspace-header">
          <div class="ai-workspace-icon">ğŸ’¡</div>
          <div class="ai-workspace-title">æ™ºèƒ½é…è‰²å»ºè®®</div>
        </div>
        
        <div class="ai-input-section">
          <label class="ai-input-label">è¾“å…¥åŸºç¡€é¢œè‰²ï¼š</label>
          <input type="text" class="ai-input color-input" id="suggestionColorInput" placeholder="è¾“å…¥é¢œè‰²ä»£ç " value="#ff6b6b">
        </div>

        <button class="ai-btn primary" id="getSuggestionBtn">
          <span>ğŸ’¡</span>
          è·å–å»ºè®®
        </button>

        <div class="ai-result-section">
          <div class="ai-result-title">é…è‰²å»ºè®®</div>
          <div class="ai-result-content" id="colorSuggestionResult">
            ç‚¹å‡»"è·å–å»ºè®®"æŒ‰é’®å¼€å§‹åˆ†æ...
          </div>
          <div class="palette-preview" id="colorSuggestionPreview"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ä¸»é¢˜åˆ‡æ¢
    function toggleTheme() {
      const isDark = document.body.classList.toggle('dark');
      const btn = document.getElementById('toggleThemeBtn');
      if (btn) {
        btn.textContent = isDark ? 'ğŸŒ' : 'ğŸŒ“';
        btn.title = isDark ? 'åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼' : 'åˆ‡æ¢åˆ°æš—è‰²æ¨¡å¼';
      }
      localStorage.setItem('preferredTheme', isDark ? 'dark' : 'light');
    }

    // åŠŸèƒ½åˆ‡æ¢
    function switchFeature(featureName) {
      // ç§»é™¤æ‰€æœ‰æ´»åŠ¨çŠ¶æ€
      document.querySelectorAll('.ai-feature-card').forEach(card => {
        card.classList.remove('active');
      });
      document.querySelectorAll('.ai-feature-content').forEach(content => {
        content.classList.remove('active');
      });

      // æ¿€æ´»é€‰ä¸­çš„åŠŸèƒ½
      const selectedCard = document.querySelector(`[data-feature="${featureName}"]`);
      const selectedContent = document.getElementById(`${featureName}-content`);
      
      if (selectedCard) selectedCard.classList.add('active');
      if (selectedContent) selectedContent.classList.add('active');
    }

    // é¢œè‰²åˆ†æåŠŸèƒ½
    function analyzeColor(color) {
      const result = document.getElementById('colorAnalysisResult');
      result.innerHTML = '<div class="loading"><div class="loading-spinner"></div>æ­£åœ¨åˆ†æé¢œè‰²...</div>';
      
      // æ¨¡æ‹ŸAIåˆ†æè¿‡ç¨‹
      setTimeout(() => {
        const analysis = `
          <h4>é¢œè‰²å±æ€§</h4>
          <p><strong>åå…­è¿›åˆ¶ï¼š</strong> ${color}</p>
          <p><strong>RGBï¼š</strong> (255, 107, 107)</p>
          <p><strong>HSLï¼š</strong> (0Â°, 100%, 71%)</p>
          
          <h4>é¢œè‰²ç‰¹å¾</h4>
          <p><strong>è‰²ç›¸ï¼š</strong> çº¢è‰²</p>
          <p><strong>é¥±å’Œåº¦ï¼š</strong> é«˜é¥±å’Œåº¦</p>
          <p><strong>æ˜åº¦ï¼š</strong> ä¸­ç­‰æ˜åº¦</p>
          
          <h4>æƒ…æ„Ÿè”æƒ³</h4>
          <p>çƒ­æƒ…ã€æ´»åŠ›ã€æ¿€æƒ…ã€å±é™©ã€çˆ±æƒ…</p>
          
          <h4>é€‚ç”¨åœºæ™¯</h4>
          <p>å“ç‰Œæ ‡è¯†ã€è­¦å‘Šæç¤ºã€ä¿ƒé”€æ´»åŠ¨ã€é£Ÿå“è¡Œä¸š</p>
        `;
        
        result.innerHTML = analysis;
      }, 2000);
    }

    // é…è‰²åˆ†æåŠŸèƒ½
    function analyzePalette(colors) {
      const result = document.getElementById('paletteAnalysisResult');
      result.innerHTML = '<div class="loading"><div class="loading-spinner"></div>æ­£åœ¨åˆ†æé…è‰²æ–¹æ¡ˆ...</div>';
      
      setTimeout(() => {
        const analysis = `
          <h4>é…è‰²æ–¹æ¡ˆæ¦‚è§ˆ</h4>
          <p><strong>é¢œè‰²æ•°é‡ï¼š</strong> ${colors.length}ä¸ª</p>
          <p><strong>é…è‰²ç±»å‹ï¼š</strong> æ··åˆé…è‰²</p>
          
          <h4>å’Œè°åº¦åˆ†æ</h4>
          <p><strong>æ•´ä½“å’Œè°åº¦ï¼š</strong> 85/100</p>
          <p><strong>å¯¹æ¯”åº¦ï¼š</strong> ä¸­ç­‰å¯¹æ¯”åº¦</p>
          <p><strong>é¥±å’Œåº¦å¹³è¡¡ï¼š</strong> å¹³è¡¡</p>
          
          <h4>é€‚ç”¨åœºæ™¯</h4>
          <p>é€‚ç”¨äºç°ä»£ç®€çº¦è®¾è®¡ã€å“ç‰Œæ ‡è¯†ã€ç½‘é¡µè®¾è®¡ç­‰åœºæ™¯ã€‚</p>
          
          <h4>æ”¹è¿›å»ºè®®</h4>
          <p>å»ºè®®é€‚å½“è°ƒæ•´æ˜åº¦å¯¹æ¯”ï¼Œå¢åŠ å±‚æ¬¡æ„Ÿã€‚</p>
        `;
        
        result.innerHTML = analysis;
      }, 2500);
    }

    // æ–‡å­—ç”Ÿæˆé…è‰²åŠŸèƒ½
    function generateFromText(text) {
      const result = document.getElementById('textToColorResult');
      const preview = document.getElementById('textToColorPreview');
      
      result.innerHTML = '<div class="loading"><div class="loading-spinner"></div>æ­£åœ¨æ ¹æ®æè¿°ç”Ÿæˆé…è‰²æ–¹æ¡ˆ...</div>';
      preview.innerHTML = '';
      
      setTimeout(() => {
        const colors = ['#1e3a8a', '#3b82f6', '#60a5fa', '#93c5fd', '#dbeafe'];
        const analysis = `
          <h4>ç”Ÿæˆçš„é…è‰²æ–¹æ¡ˆ</h4>
          <p><strong>æè¿°ï¼š</strong> ${text}</p>
          <p><strong>é¢œè‰²æ•°é‡ï¼š</strong> 5ä¸ª</p>
          <p><strong>é…è‰²ç†å¿µï¼š</strong> åŸºäºç°ä»£è®¾è®¡ç†å¿µï¼Œæ³¨é‡è‰²å½©å’Œè°ä¸è§†è§‰å¹³è¡¡ã€‚</p>
        `;
        
        result.innerHTML = analysis;
        
        // æ˜¾ç¤ºé¢œè‰²é¢„è§ˆ
        preview.innerHTML = colors.map(color => 
          `<div class="palette-color" style="background: ${color}" title="${color}">${color}</div>`
        ).join('');
      }, 3000);
    }

    // æ™ºèƒ½é…è‰²å»ºè®®åŠŸèƒ½
    function getColorSuggestion(baseColor) {
      const result = document.getElementById('colorSuggestionResult');
      const preview = document.getElementById('colorSuggestionPreview');
      
      result.innerHTML = '<div class="loading"><div class="loading-spinner"></div>æ­£åœ¨ç”Ÿæˆé…è‰²å»ºè®®...</div>';
      preview.innerHTML = '';
      
      setTimeout(() => {
        const suggestions = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7'];
        const analysis = `
          <h4>é…è‰²å»ºè®®</h4>
          <p><strong>åŸºç¡€é¢œè‰²ï¼š</strong> ${baseColor}</p>
          <p><strong>é…è‰²ç±»å‹ï¼š</strong> äº’è¡¥è‰²é…è‰²</p>
          <p><strong>å»ºè®®è¯´æ˜ï¼š</strong> äº’è¡¥è‰²é…è‰²èƒ½å¤Ÿåˆ›é€ å¼ºçƒˆçš„è§†è§‰å¯¹æ¯”ï¼Œé€‚åˆéœ€è¦çªå‡ºé‡è¦å…ƒç´ çš„åœºæ™¯ã€‚</p>
        `;
        
        result.innerHTML = analysis;
        
        // æ˜¾ç¤ºå»ºè®®é¢œè‰²é¢„è§ˆ
        preview.innerHTML = suggestions.map(color => 
          `<div class="palette-color" style="background: ${color}" title="${color}">${color}</div>`
        ).join('');
      }, 2000);
    }

    // äº‹ä»¶ç›‘å¬å™¨
    document.addEventListener('DOMContentLoaded', function() {
      // ä¸»é¢˜åˆ‡æ¢
      const themeBtn = document.getElementById('toggleThemeBtn');
      if (themeBtn) {
        themeBtn.addEventListener('click', toggleTheme);
      }

      // æ¢å¤ä¸»é¢˜åå¥½
      const savedTheme = localStorage.getItem('preferredTheme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark');
        if (themeBtn) {
          themeBtn.textContent = 'ğŸŒ';
          themeBtn.title = 'åˆ‡æ¢åˆ°äº®è‰²æ¨¡å¼';
        }
      }

      // åŠŸèƒ½åˆ‡æ¢
      document.querySelectorAll('.ai-feature-card').forEach(card => {
        card.addEventListener('click', function() {
          const feature = this.getAttribute('data-feature');
          switchFeature(feature);
        });
      });

      // é¢œè‰²åˆ†æåŠŸèƒ½
      const analyzeColorBtn = document.getElementById('analyzeColorBtn');
      const analysisColorInput = document.getElementById('analysisColorInput');

      if (analyzeColorBtn) {
        analyzeColorBtn.addEventListener('click', function() {
          const color = analysisColorInput.value;
          if (color && /^#[0-9A-F]{6}$/i.test(color)) {
            analyzeColor(color);
          } else {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¢œè‰²ä»£ç ï¼');
          }
        });
      }

      // é…è‰²åˆ†æåŠŸèƒ½
      const analyzePaletteBtn = document.getElementById('analyzePaletteBtn');
      const paletteAnalysisInput = document.getElementById('paletteAnalysisInput');

      if (analyzePaletteBtn) {
        analyzePaletteBtn.addEventListener('click', function() {
          const input = paletteAnalysisInput.value;
          const colors = input.split('\n').filter(line => /^#[0-9A-F]{6}$/i.test(line.trim()));
          
          if (colors.length > 0) {
            analyzePalette(colors);
          } else {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¢œè‰²ä»£ç ï¼');
          }
        });
      }

      // æ–‡å­—ç”Ÿæˆé…è‰²åŠŸèƒ½
      const generateFromTextBtn = document.getElementById('generateFromTextBtn');
      const textToColorInput = document.getElementById('textToColorInput');

      if (generateFromTextBtn) {
        generateFromTextBtn.addEventListener('click', function() {
          const text = textToColorInput.value.trim();
          
          if (text) {
            generateFromText(text);
          } else {
            alert('è¯·è¾“å…¥æè¿°æ–‡å­—ï¼');
          }
        });
      }

      // æ™ºèƒ½é…è‰²å»ºè®®åŠŸèƒ½
      const getSuggestionBtn = document.getElementById('getSuggestionBtn');
      const suggestionColorInput = document.getElementById('suggestionColorInput');

      if (getSuggestionBtn) {
        getSuggestionBtn.addEventListener('click', function() {
          const color = suggestionColorInput.value;
          
          if (color && /^#[0-9A-F]{6}$/i.test(color)) {
            getColorSuggestion(color);
          } else {
            alert('è¯·è¾“å…¥æœ‰æ•ˆçš„é¢œè‰²ä»£ç ï¼');
          }
        });
      }

      // é¢œè‰²é¢„è§ˆç‚¹å‡»å¤åˆ¶
      document.addEventListener('click', function(e) {
        if (e.target.classList.contains('palette-color')) {
          const color = e.target.getAttribute('title');
          navigator.clipboard.writeText(color).then(() => {
            // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸæç¤º
            const originalText = e.target.textContent;
            e.target.textContent = 'å·²å¤åˆ¶!';
            setTimeout(() => {
              e.target.textContent = originalText;
            }, 1000);
          });
        }
      });
    });
  </script>
</body>
</html>
